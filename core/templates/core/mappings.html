{% extends 'core/base.html' %}
{% block content %}
<h1 class="text-2xl font-semibold mb-4">Mappings</h1>

<form method="post" action="/mappings/create/" class="bg-white rounded-2xl shadow p-4 mb-6">
  {% csrf_token %}
  <div class="grid grid-cols-4 gap-3">
    <label class="text-sm">Client
      <select name="client" class="border rounded p-1 w-full">
        {% for c in clients %}
          <option value="{{ c.id }}">{{ c.code }} â€“ {{ c.name }}</option>
        {% endfor %}
      </select>
    </label>
    <label class="text-sm">Domain
      <input name="domain" placeholder="acme.com" class="border rounded p-1 w-full">
    </label>
    <label class="text-sm">Email
      <input name="email" placeholder="user@acme.com" class="border rounded p-1 w-full">
    </label>
    <label class="text-sm">Subject pattern
      <input name="subject_pattern" placeholder="C-13" class="border rounded p-1 w-full">
    </label>
  </div>
  <div class="mt-3 text-right">
    <button class="bg-slate-900 text-white rounded px-3 py-1">Add</button>
  </div>
</form>

<div class="bg-white rounded-2xl shadow divide-y">
  <div class="grid grid-cols-5 gap-4 px-4 py-2 text-xs font-semibold text-slate-500">
    <div>Client</div><div>Domain</div><div>Email</div><div>Subject Pattern</div><div></div>
  </div>
  {% for m in items %}
  <div class="grid grid-cols-5 gap-4 px-4 py-3 items-center">
    <div class="text-sm">{{ m.client.name }}</div>
    <div class="text-sm">{{ m.domain }}</div>
    <div class="text-sm">{{ m.email }}</div>
    <div class="text-sm">{{ m.subject_pattern }}</div>
    <form method="post" action="/mappings/{{ m.id }}/delete/">{% csrf_token %}
      <button class="text-sm text-red-600">Delete</button>
    </form>
  </div>
  {% empty %}
    <div class="p-6 text-center text-slate-500">No mappings yet.</div>
  {% endfor %}
</div>
{% endblock %}
